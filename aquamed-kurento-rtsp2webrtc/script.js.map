{"version":3,"sources":["js/aquamed-kurento-rtsp2webrtc.ts","script.ts"],"names":["StreamingSettings","StreamingSettings.constructor","StreamingSettings.rtspUrls","PlayerToWebRtcBundle","PlayerToWebRtcBundle.constructor","PlayerToWebRtcBundle.playerEndpoint","PlayerToWebRtcBundle.webRtcEndpoint","PlayerToWebRtcBundle.filters","StartStreamingResponse","StartStreamingResponse.constructor","StartStreamingResponse.stop","KurentoClientError","KurentoClientError.constructor","RtspStreamingManager","RtspStreamingManager.constructor","RtspStreamingManager.startStreaming","RtspStreamingManager.createKurentoClient","RtspStreamingManager.createMediaPipeline","RtspStreamingManager.createWebRtcPeer","RtspStreamingManager.createPlayerEndpoints","RtspStreamingManager.createWebRtcEndpoints","RtspStreamingManager.createWebRtcEndpoints2","RtspStreamingManager.connectPlayerEndpointsToWebRtcEndpoints","RtspStreamingManager.connectPlayerEndpointToWebRtcEndpoint","RtspStreamingManager.createPlayerToWebRtcBundles","RtspStreamingManager.createWebRtcEndpoint","initVideos","initalizeLogContainer","appendLog","VideoWithUrlInput","VideoWithUrlInput.constructor","VideoWithUrlInput.containerSelector","VideoWithUrlInput.getVideoElement","VideoWithUrlInput.startStreaming","Sample","Sample.constructor","Sample.showPoster","Sample.showSpinner","Sample.getKurentoUri","Sample.startPlayback","Sample.stopPlayback","Sample1","Sample1.constructor","Sample1.handleStarting","Sample1.handleStartSuccess","Sample1.handleStartFail","Sample1.handleStopClick","Sample2","Sample2.constructor"],"mappings":"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","file":"script.js","sourcesContent":[null,"/// <reference path=\"./js/aquamed-kurento-rtsp2webrtc.ts\" />\r\n/// <reference path=\"./typings/kurento-client.d.ts\" />\r\n/// <reference path=\"./typings/kurento-utils.d.ts\" />\r\n\r\nvar poster = './content/poster.png',\r\n    sample1,\r\n    sample2;\r\n\r\nwindow.addEventListener('load', function () {\r\n\r\n    sample1 = new Sample1();\r\n\r\n    sample2 = new Sample2();\r\n\r\n    initVideos();\r\n\r\n    //initalizeLogContainer(document.getElementById('log-cont'));\r\n});\r\n\r\nfunction initVideos() {\r\n    var videos = document.getElementsByTagName('video');\r\n    for (var i = 0; i < videos.length; i++) {\r\n        videos[i].poster = poster;\r\n        videos[i].setAttribute('autoplay', 'autoplay');\r\n    }\r\n}\r\n\r\nfunction initalizeLogContainer(logContainer) {\r\n    var log = console.log,\r\n        error = console.error;\r\n    console.log = function () {\r\n        appendLog(logContainer, Array.prototype.slice.call(arguments).join(' '))\r\n        log.apply(this, Array.prototype.slice.call(arguments));\r\n    };\r\n    console.error = function () {\r\n        appendLog(logContainer, Array.prototype.slice.call(arguments).map(function (e) { return e instanceof Error ? e.message : e.toString() }).join(' '), 'bg-danger')\r\n        error.apply(this, Array.prototype.slice.call(arguments));\r\n    };\r\n    window.onerror = function (err) { console.error(err) };\r\n}\r\n\r\nfunction appendLog(logContainer, text, cssClass = '') {\r\n    var li = document.createElement('li');\r\n    li.innerText = text;\r\n    li.className = cssClass || '';\r\n    if (logContainer.children.length > 0)\r\n        logContainer.insertBefore(li, logContainer.firstChild);\r\n    else\r\n        logContainer.appendChild(li);\r\n}\r\n\r\n/**\r\n * @class\r\n * \r\n * @param {HTMLVideoElement} videoElement\r\n * @param {Function} getUrlFunc\r\n */\r\nclass VideoWithUrlInput {\r\n\r\n    static get containerSelector(): string {\r\n        return 'video-with-url';\r\n    }\r\n\r\n    constructor(container: HTMLDivElement) {\r\n        this._videoElement = container.getElementsByTagName('video')[0];\r\n        this._urlInput = container.getElementsByTagName('input')[0];\r\n    }\r\n\r\n    private _videoElement: HTMLVideoElement;\r\n    private _urlInput: HTMLInputElement;\r\n    private streamingManager = new RtspStreamingManager();\r\n\r\n    getVideoElement() {\r\n        return this._videoElement;\r\n    }\r\n    startStreaming(kurentoUri: string) {\r\n        return this.streamingManager.startStreaming(new StreamingSettings(kurentoUri, this._urlInput.value), this._videoElement);\r\n    }\r\n\r\n}\r\n\r\n\r\n/**\r\n * @class\r\n * \r\n * @param {HTMLElement} sampleContainer\r\n */\r\nclass Sample {\r\n\r\n    constructor(sampleContainer: HTMLElement) {\r\n\r\n        this.startButton = <HTMLButtonElement>sampleContainer.getElementsByClassName('btn-start')[0];\r\n        this.startButton.addEventListener('click', () => this.startPlayback());\r\n\r\n        this.pauseButton = <HTMLButtonElement>sampleContainer.getElementsByClassName('btn-pause')[0];\r\n\r\n        this.stopButton = <HTMLButtonElement>sampleContainer.getElementsByClassName('btn-stop')[0];\r\n        this.stopButton.addEventListener('click', () => this.stopPlayback());\r\n\r\n        var videoWithUrlContainers = sampleContainer.getElementsByClassName(VideoWithUrlInput.containerSelector);\r\n        for (var i = 0; i < videoWithUrlContainers.length; i++)\r\n            this.videosWithUrls.push(new VideoWithUrlInput(<HTMLDivElement>videoWithUrlContainers[i]));\r\n    }\r\n\r\n    protected videosWithUrls: VideoWithUrlInput[] = [];\r\n    private startResponses: StartStreamingResponse[] = [];\r\n    protected startButton: HTMLButtonElement;\r\n    protected pauseButton: HTMLButtonElement;\r\n    protected stopButton: HTMLButtonElement;\r\n\r\n    protected onStarting: () => void;\r\n    protected onStartSuccess: (responses: StartStreamingResponse[]) => void;\r\n    protected onStartFail: (err) => void;\r\n    protected onStopClick: () => void;\r\n\r\n    showPoster() {\r\n        this.videosWithUrls.forEach(v => v.getVideoElement().poster = poster);\r\n    }\r\n    showSpinner() {\r\n        this.videosWithUrls.forEach(v => v.getVideoElement().poster = './content/poster.gif');\r\n    }\r\n    getKurentoUri(): string {\r\n        return 'ws://' + document.getElementById('kurento').getAttribute('value') + ':8888/kurento';\r\n    }\r\n\r\n    startPlayback(): void {\r\n        if (this.onStarting)\r\n            this.onStarting();\r\n\r\n        this.startButton.disabled = true;\r\n\r\n        this.showSpinner();\r\n\r\n        var kurentoUri = this.getKurentoUri(),\r\n            promises = this.videosWithUrls.map(v => v.startStreaming(kurentoUri));\r\n\r\n        Promise.all(promises)\r\n            .then(\r\n                responses => {\r\n                    responses.forEach(r => this.startResponses.push(r));\r\n                    this.stopButton.disabled = false;\r\n                    if (this.onStartSuccess)\r\n                        this.onStartSuccess(responses);\r\n                },\r\n                error => {\r\n                    console.error(error);\r\n                    this.showPoster();\r\n                    this.startButton.disabled = false;\r\n                    if (this.onStartFail)\r\n                        this.onStartFail(error);\r\n                });\r\n    }\r\n\r\n    stopPlayback(): void {\r\n        if (this.startResponses.length < this.videosWithUrls.length)\r\n            return;\r\n\r\n        this.startResponses.forEach(r => r.stop());\r\n        this.startResponses.length = 0;\r\n        this.videosWithUrls.forEach(v => v.getVideoElement().src = '');\r\n        this.showPoster();\r\n        this.startButton.disabled = false;\r\n        this.stopButton.disabled = true;\r\n\r\n        if (this.onStopClick)\r\n            this.onStopClick();\r\n    }\r\n}\r\n\r\nclass Sample1 extends Sample {\r\n\r\n    constructor() {\r\n        super(document.getElementById('sample-1'));\r\n\r\n        this.infoElement = document.getElementById('info');\r\n\r\n        this.onStarting = () => this.handleStarting();\r\n        this.onStartSuccess = r => this.handleStartSuccess(r);\r\n        this.onStartFail = e => this.handleStartFail(e);\r\n        this.onStopClick = () => this.handleStopClick();\r\n    }\r\n\r\n    private infoElement;\r\n\r\n    private handleStarting(): void {\r\n        this.infoElement.value = 'Запуск. Ждите...';\r\n    }\r\n\r\n    private handleStartSuccess(responses: StartStreamingResponse[]): void {\r\n            this.infoElement.value = 'Готово!';\r\n    }\r\n    \r\n    private handleStartFail(err): void {\r\n            this.infoElement.value = 'Ошибка! Смотрите консоль.';\r\n    }\r\n\r\n    private handleStopClick(): void {\r\n        this.infoElement.value = 'Остановлено.';\r\n    }\r\n}\r\n\r\nclass Sample2 extends Sample {\r\n\r\n    constructor() {\r\n        super(document.getElementById('sample-2'));\r\n    }\r\n}"],"sourceRoot":"/source/"}