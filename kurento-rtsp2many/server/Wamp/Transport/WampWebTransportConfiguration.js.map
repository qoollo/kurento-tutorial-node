{"version":3,"sources":["server/Wamp/Transport/WampWebTransportConfiguration.ts"],"names":["WampWebTransportConfiguration","WampWebTransportConfiguration.constructor","WampWebTransportConfiguration.type","WampWebTransportConfiguration.getUrl"],"mappings":"AACA,IAAO,qBAAqB,WAAW,yBAAyB,CAAC,CAAC;AAElE,IAAO,sBAAsB,WAAW,0BAA0B,CAAC,CAAC;AACpE,IAAO,yBAAyB,WAAW,6BAA6B,CAAC,CAAC;AAE1E;IAEIA,uCAAYA,MAAqCA;QAmBjDC,UAAKA,GAAuBA,EAAEA,CAACA;QAlB3BA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,qBAAqBA,CAACA,MAAMA,CAACA,QAAQA,CAACA,IAAIA,CAACA,CAACA;QAChEA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,IAAIA,MAAMA,CAACA,KAAKA,CAACA,CAACA,CAACA;YACzBA,IAAIA,CAACA,GAAGA,MAAMA,CAACA,KAAKA,CAACA,CAACA,CAACA,EACnBA,IAAsBA,CAACA;YAC3BA,EAAEA,CAACA,CAACA,CAACA,CAACA,IAAIA,IAAIA,QAAQA,CAACA;gBACnBA,IAAIA,GAAGA,IAAIA,sBAAsBA,CAACA,CAACA,EAAEA,CAACA,CAACA,SAASA,CAACA,CAACA;YACtDA,IAAIA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA,IAAIA,IAAIA,WAAWA,CAACA;gBAC3BA,IAAIA,GAAGA,IAAIA,yBAAyBA,CAACA,CAACA,CAACA,CAACA;YAC5CA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA;QAC1BA,CAACA;IACLA,CAACA;IAEDD,sBAAIA,+CAAIA;aAARA;YACIE,MAAMA,CAACA,KAAKA,CAACA;QACjBA,CAACA;;;OAAAF;IAMMA,8CAAMA,GAAbA,UAAcA,MAAcA,EAAEA,IAAYA;QACtCG,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,UAAAA,CAACA,IAAIA,OAAAA,CAACA,CAACA,IAAIA,IAAIA,IAAIA,EAAdA,CAAcA,CAACA,CAACA,CAACA,CAACA,EAC7CA,OAAOA,GAAGA,CAACA,CAACA,IAAIA,IAAIA,GAAGA,GAAGA,EAAEA,GAAGA,CAACA,CAACA,IAAIA,EACrCA,MAAcA,CAACA;QAEnBA,EAAEA,CAACA,CAACA,CAACA,CAACA,CAACA;YACHA,MAAMA,IAAIA,KAAKA,CAACA,QAAQA,GAAGA,IAAIA,GAAGA,+CAA+CA,CAACA,CAACA;QAEvFA,EAAEA,CAACA,CAACA,CAACA,YAAYA,sBAAsBA,CAACA;YACpCA,MAAMA,GAAGA,MAAMA,CAACA;QACpBA,IAAIA,CAACA,EAAEA,CAACA,CAACA,CAACA,YAAYA,yBAAyBA,CAACA;YAC5CA,MAAMA,GAAGA,IAAIA,CAACA;QAClBA,IAAIA;YACAA,MAAMA,IAAIA,KAAKA,CAACA,uCAAuCA,CAACA,CAACA;QAE7DA,MAAMA,CAACA,MAAMA,GAAGA,KAAKA,GAAGA,MAAMA,GAAGA,GAAGA,GAAGA,IAAIA,CAACA,QAAQA,CAACA,IAAIA,GAAGA,GAAGA,GAAGA,OAAOA,CAACA;IAC9EA,CAACA;IACLH,oCAACA;AAADA,CAxCA,AAwCCA,IAAA;AAED,iBAAS,6BAA6B,CAAC","file":"server/Wamp/Transport/WampWebTransportConfiguration.js","sourcesContent":["\r\nimport WampListeningEndpoint = require('./WampListeningEndpoint');\r\nimport WampEndpointPath = require('./WampEndpointPath');\r\nimport WampStaticEndpointPath = require('./WampStaticEndpointPath');\r\nimport WampWebSocketEndpointPath = require('./WampWebSocketEndpointPath');\r\n\r\nclass WampWebTransportConfiguration {\r\n\r\n    constructor(config: crossbar.config.IWebTransport) {\r\n        this.endpoint = new WampListeningEndpoint(config.endpoint.port);\r\n        for (var f in config.paths) {\r\n            var p = config.paths[f],\r\n                path: WampEndpointPath;\r\n            if (p.type == 'static')\r\n                path = new WampStaticEndpointPath(f, p.directory);\r\n            else if (p.type == 'websocket')\r\n                path = new WampWebSocketEndpointPath(f);\r\n            this.paths.push(path);\r\n        }\r\n    }\r\n\r\n    get type(): string {\r\n        return 'web';\r\n    }\r\n\r\n    endpoint: WampListeningEndpoint;\r\n\r\n    paths: WampEndpointPath[] = [];\r\n\r\n    public getUrl(domain: string, path: string): string {\r\n        var p = this.paths.filter(e => e.path == path)[0],\r\n            pathStr = p.path == '/' ? '' : p.path,\r\n            scheme: string;\r\n\r\n        if (!p)\r\n            throw new Error('Path \"' + path + '\" not found in WampWebTransportConfiguration.');\r\n\r\n        if (p instanceof WampStaticEndpointPath)\r\n            scheme = 'http';\r\n        else if (p instanceof WampWebSocketEndpointPath)\r\n            scheme = 'ws';\r\n        else\r\n            throw new Error('Unknown WampEndpointPath constructor.');\r\n\r\n        return scheme + '://' + domain + ':' + this.endpoint.port + '/' + pathStr;\r\n    }\r\n}\r\n\r\nexport = WampWebTransportConfiguration;"],"sourceRoot":"/source/"}