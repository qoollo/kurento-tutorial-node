{"version":3,"file":"server.js","sourceRoot":"","sources":["server.ts"],"names":["nextUniqueId","addMasterIfNotExists","processAddViewer","removeReceiver","removeSender","stop","RpcResponse","RpcResponse.constructor","RpcSuccessResponse","RpcSuccessResponse.constructor","RpcErrorResponse","RpcErrorResponse.constructor","RpcResponseStatus"],"mappings":"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"}